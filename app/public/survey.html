<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Friend Finder</title>

    <!-- Bootstrap -->
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
      integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
      crossorigin="anonymous"
    />
    <!-- Fontawesome -->
    <script src="https://kit.fontawesome.com/cc45af3f98.js"></script>
  </head>

  <body>
    <div class="container">
      <div class="jumbotron text-center">
        <h1 style="margin-bottom: 1rem">
          Friend Finder Survey!
        </h1>
        <h3>Please Answer the follwoing 10 Questions.</h3>
        <p>
          5 Indicates Strong Agreement | 3 Indicates Indifference | 1 Indicates
          Strong Disagreement
        </p>
      </div>
      <section class="form-section">
        <div class="row justify-content-around">
          <div class="col-4">
            <div class="form-group">
              <label for="nameInput">Please enter your name…</label>
              <input
                type="text"
                class="form-control"
                id="nameInput"
                placeholder="Guy Incognito"
              />
            </div>
          </div>
          <div class="col-7">
            <div class="form-group">
              <label for="imgURLInput"
                >Please enter an URL to your image…</label
              >
              <input
                type="text"
                class="form-control"
                id="imgURLInput"
                placeholder="http://"
              />
            </div>
          </div>
        </div>
        <hr />
        <div class="row justify-content-around">
          <div class="col-2">
            <div class="form-group">
              <label for="surveyQ1">What are your Thoughts on Sunsets?</label>
              <select class="form-control" id="surveyQ1">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
            </div>
          </div>
          <div class="col-2">
            <div class="form-group">
              <label for="surveyQ2">What are your Thoughts on Sunrises?</label>
              <select class="form-control" id="surveyQ2">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
            </div>
          </div>
          <div class="col-2">
            <div class="form-group">
              <label for="surveyQ3">Do you like to read Books?</label>
              <select class="form-control" id="surveyQ3">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
            </div>
          </div>
          <div class="col-2">
            <div class="form-group">
              <label for="surveyQ4">Do you enjoy going to the Movies?</label>
              <select class="form-control" id="surveyQ4">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
            </div>
          </div>
          <div class="col-2">
            <div class="form-group">
              <label for="surveyQ5">Are you a sports fan?</label>
              <select class="form-control" id="surveyQ5">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
            </div>
          </div>
        </div>
        <hr />
        <div class="row justify-content-around">
          <div class="col-2">
            <div class="form-group">
              <label for="surveyQ6">What are your Thoughts Beaches?</label>
              <select class="form-control" id="surveyQ6">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
            </div>
          </div>
          <div class="col-2">
            <div class="form-group">
              <label for="surveyQ"
                >What is your favorite Number between 1 and 5?</label
              >
              <select class="form-control" id="surveyQ7">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
            </div>
          </div>
          <div class="col-2">
            <div class="form-group">
              <label for="surveyQ8">Do you like traveling? </label>
              <select class="form-control" id="surveyQ8">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
            </div>
          </div>
          <div class="col-2">
            <div class="form-group">
              <label for="surveyQ9"
                >Do you thing the Phillies will win the World Series this
                year?</label
              >
              <select class="form-control" id="surveyQ9">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
            </div>
          </div>
          <div class="col-2">
            <div class="form-group">
              <label for="surveyQ10"
                >What are your thoughts on Revolution?</label
              >
              <select class="form-control" id="surveyQ10">
                <option>1</option>
                <option>2</option>
                <option>3</option>
                <option>4</option>
                <option>5</option>
              </select>
            </div>
          </div>
        </div>
        <hr />
        <button type="submit" class="submit btn btn-info">
          Submit Survey Answers
        </button>
      </section>

      <footer class="footer" style="margin-top: 2rem">
        <div class="container">
          <p>
            <a href="/api/friends">API Table Link</a>
          </p>
        </div>
      </footer>
    </div>

    <div
      class="modal fade"
      id="matchModal"
      tabindex="-1"
      role="dialog"
      aria-labelledby="matchModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h2 class="modal-title"><strong>We've Found a match!</strong></h2>
            <button type="button" class="close" data-dismiss="modal">
              &times;
            </button>
          </div>
          <div class="modal-body">
            <h2 id="match-name">match name</h2>
            <img
              id="match-img"
              src="https://media.licdn.com/mpr/mpr/shrinknp_400_400/p/6/005/064/1bd/3435aa3.jpg"
              alt="match image"
              style="width:100%"
            />
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">
              Close
            </button>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>

<!-- Code for sending data to our server -->
<script type="text/javascript">
  const submitButton = document.querySelector(".submit");

  submitButton.addEventListener("click", event => {
    event.preventDefault();

    const nameInput = document.querySelector("#nameInput");
    const photoInput = document.querySelector("#imgURLInput");

    const scoresArray = [];
    for (let i = 1; i < 11; i++) {
      let surveyQx = "#surveyQ" + i;
      let answerX = document.querySelector(surveyQx);
      let score = parseInt(answerX.value);
      scoresArray.push(score);
    }

    const newFriend = {
      name: nameInput.value,
      photo: photoInput.value,
      scores: scoresArray
    };
    console.log(newFriend);
    const url = "/api/friends";

    fetch(url, {
      method: "POST",
      body: JSON.stringify(newFriend),
      headers: {
        "Content-Type": "application/json"
      }
    })
      .then(res => res.json())
      .then(data => {
        // this is where the logic goes.
        // $("#matchModal").css(`aria-hidden="false"`);
        // $('#myModal').modal(options)
        if (data) {
          alert("We are looking for a friend of yours now!");
        }
      })
      .catch(error => console.error("Error:", error));

    // load modal with found match
    $("#match-name").text("hello");
    $("#match-img").attr(
      "src",
      "https://images.unsplash.com/photo-1500382017468-9049fed747ef?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&w=1000&q=80"
    );

    // toggle modal
    $("#matchModal").modal("toggle");

    // Clear the form when submitting
    nameInput.value = "";
    photoInput.value = "";
  });
</script>

<!-- bootstrap javascript -->
<script
  src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
  integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
  crossorigin="anonymous"
></script>
<script
  src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
  integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
  crossorigin="anonymous"
></script>
<script
  src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
  integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
  crossorigin="anonymous"
></script>
